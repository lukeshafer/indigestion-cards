---
import Page from '@/layouts/Page.astro';
import { PageTitle, PageHeader } from '@/components/text';
import RarityForm from '@/components/rarities/RarityForm';

const bucket = Astro.url.searchParams.get('bucket');
const key = Astro.url.searchParams.get('key');

if (!bucket || !key) {
	return Astro.redirect('/?alert=Please upload an image first');
}

const imgUrl = `https://${bucket}.s3.amazonaws.com/${key}`;
---

<Page title="Add Rarity Details">
	<PageHeader>
		<PageTitle>Add Rarity</PageTitle>
	</PageHeader>
	<RarityForm client:load {imgUrl} {key} {bucket} />
</Page>
