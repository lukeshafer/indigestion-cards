---
import Page from '@/layouts/Page.astro'
import { getAllSeasons } from '@lil-indigestion-cards/core/card'
import H1 from '@/components/H1.astro'
import { useUser } from '@/session'

const user = useUser(Astro.cookies)
if (!user) return Astro.redirect('/public')

const seasons = await getAllSeasons()

const breadcrumbs = [
	{ label: 'Home', href: '/' },
	{ label: 'Seasons', href: '/seasons' },
]
---

<Page
	title="All Seasons"
	class="mx-auto max-w-5xl grid gap-4 grid-cols-1 justify-items-center"
	breadcrumbs={breadcrumbs}
	session={user}>
	<H1>All Seasons</H1>
	<a
		href="/create/card-design"
		class="text-lg bg-brand-tertiary p-1 px-4 rounded-xl text-center w-max self-center font-display lowercase italic shine pt-2 text-shadow text-white">
		New Season
	</a>
	<ul class="flex flex-wrap gap-8 text-4xl pt-10">
		{
			seasons.map((season, index) => (
					<li>
						<a
							class="font-display shine italic text-white text-shadow p-8 pt-9"
							class:list={{
								'bg-accent-secondary': index % 2 === 0,
								'bg-accent-primary': index % 2 === 1,
							}}
							href={`/season/${season.seasonId}`}>
							{season.seasonName}
						</a>
					</li>
			))
		}
	</ul>
</Page>
