---
import Page from '@/layouts/Page.astro'
import { getAllSeasons } from '@lil-indigestion-cards/core/card'
import { useUser } from '@/session'
import { routes } from '@/constants'

const user = useUser(Astro.cookies)
if (user?.type !== 'user') return Astro.redirect('/404')

const seasons = await getAllSeasons()

const breadcrumbs = [
	{ label: 'Home', href: '/' },
	{ label: 'Seasons', href: routes.SEASONS },
]
---

<Page
	title="All Seasons"
	class="max-w-5xl grid gap-4 grid-cols-1"
	breadcrumbs={breadcrumbs}
	session={user}>
	<div class="flex flex-wrap gap-8">
		<h1 class="page-heading">All Seasons</h1>
		<a
			href={routes.ADMIN.CREATE.SEASON}
			class="text-xl bg-brand-tertiary p-3 pt-4 px-4 text-center w-max font-display lowercase italic shine text-shadow text-white">
			Create New Season
		</a>
	</div>
	<ul class="flex flex-wrap gap-8 text-4xl pt-10">
		{
			seasons.map((season, index) => (
				<li>
					<a
						class="font-display shine italic text-white text-shadow p-8 pt-9"
						class:list={{
							'bg-accent-secondary': index % 2 === 0,
							'bg-accent-primary': index % 2 === 1,
						}}
						href={`${routes.SEASONS}/${season.seasonId}`}>
						{season.seasonName}
					</a>
				</li>
			))
		}
	</ul>
</Page>
