---
import { getSiteConfig } from '@lil-indigestion-cards/core/site-config'
import { getAllSeasons } from '@lil-indigestion-cards/core/card'
import { useSession } from '@/session'
import Page from '@/layouts/Page.astro'
import H1 from '@/components/H1.astro'
import Form from '@/components/form/Form.astro'
import InputBase from '@/components/form/InputBase.astro'

const user = useSession(Astro.cookies)
if (!user) return Astro.redirect('/public')

const { season } = await getSiteConfig()
const seasons = await getAllSeasons()
---

<Page
	title="Site Settings"
	class="grid gap-4 justify-center"
	session={user}
	breadcrumbs={[{ label: 'Home', href: '/' }, { label: 'Settings' }]}>
	<H1>Site Settings</H1>
	<Form>
		<InputBase id="seasonId" label="Current Season">
			<select class="p-4 bg-gray-50" value={season[0]?.seasonId ?? ''}>
				{seasons.map((s) => <option value={s.seasonId}>{s.seasonName}</option>)}
			</select>
		</InputBase>
	</Form>
</Page>
