---
import Page from '@/layouts/Page.astro'
import CardList from '@/components/CardList.astro'
import UnmatchedImageList from '@/components/UnmatchedImageList.astro'
import { getAllCardDesigns } from '@lil-indigestion-cards/core/card'
import H1 from '@/components/H1.astro'
import { useUser } from '@/session'

const user = useUser(Astro.cookies)
if (!user) return Astro.redirect('/')
const designs = await getAllCardDesigns()

const message = Astro.url.searchParams.get('message') || ''
---

<Page title="All Cards" class="grid gap-4 justify-center" session={user}>
	{message ? <p class="text-xl text-center p-4 bg-green-100">{message}</p> : null}
	<UnmatchedImageList type="cardDesign" />
	<H1>All Card Designs</H1>
	<CardList cards={designs} />
	<a
		href="/create/card-design"
		class="text-lg bg-pink-200 p-4 rounded-xl text-center w-max justify-self-center"
		>Create New Design</a
	>
</Page>
