---
import Page from '@/layouts/Page.astro'
import CardList from '@/components/CardList.astro'
import UnmatchedImageList from '@/components/UnmatchedImageList.astro'
import { getAllCardDesigns } from '@lil-indigestion-cards/core/card'
import H1 from '@/components/H1.astro'
import { useUser } from '@/session'

const user = useUser(Astro.cookies)
if (!user) return Astro.redirect('/public')
const designs = await getAllCardDesigns()

const message = Astro.url.searchParams.get('message') || ''

const breadcrumbs = [
	{ label: 'Home', href: '/' },
	{ label: 'Designs', href: '/all-cards' },
]
---

<Page title="All Cards" class="flex flex-col gap-4" session={user} breadcrumbs={breadcrumbs}>
	{message ? <p class="text-xl text-center p-4 bg-green-200">{message}</p> : null}
	<UnmatchedImageList type="cardDesign" />
	<div class="flex flex-wrap gap-8">
		<H1>All Card Designs</H1>
		<a
			href="/create/card-design"
			class="text-xl bg-brand-tertiary p-3 px-4 text-center w-max font-display lowercase italic shine pt-4 text-shadow text-white">
			Create New Design
		</a>
	</div>
	<CardList cards={designs} />
</Page>
