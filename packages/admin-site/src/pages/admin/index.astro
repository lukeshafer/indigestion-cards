---
import { useUser } from '@/session'

const user = useUser(Astro.cookies)
if (user?.type === 'user') return Astro.redirect('/')

import { Icon } from 'astro-icon'
import '../../global.css'
import { authApi } from '@/constants'
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>Log In</title>
	</head>
	<body>
		<main>
			<a class="shine" href={authApi.LOGIN}>
				<Icon name="mdi:twitch" width="50" />
				<span>Log in with Twitch</span>
			</a>
		</main>
	</body>
</html>

<style>
	main {
		display: flex;
		justify-content: center;
		align-items: center;
		min-height: 100vh;
	}

	a {
		--color-bg: #9146ff;
		--color-text: #fff;

		display: flex;
		align-items: center;
		padding: 0.9rem 1.3rem;
		border: 1px solid var(--color-bg);
		color: var(--color-text);
		text-decoration: none;
		background-color: var(--color-bg);
		transition: all 0.1s ease-in-out;
		font-weight: 500;
	}

	a:hover,
	a:focus {
		--color-bg: #772ce8;
		padding: 0.7rem 1.1rem;
	}

	a > span {
		margin-inline: 1rem;
	}
</style>
