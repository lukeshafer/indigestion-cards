---
import Page from '@/layouts/Page.astro'
import Form, { inputClasses } from '@/components/form/Form.astro'
import { useUser } from '@/session'
import InputBase from '@/components/form/InputBase.astro'
import { api, routes } from '@/constants'

const user = useUser(Astro.cookies)
if (user?.type !== 'user') return Astro.redirect('/404')
---

<Page title="Add admin user" class="max-w-xl" session={user}>
	<h1 class="page-heading">Add admin user</h1>
	<Form
		class="w-max"
		method="post"
		action={`${api.CREATE_ADMIN_USER}?redirect=${routes.ADMIN.CREATE.ADMIN}`}>
		<InputBase id="username" label="Twitch Username">
			<input class={inputClasses.input} type="text" name="username" id="username" />
		</InputBase>
		<button class="bg-white p-4 mt-4 font-bold" type="submit">Add</button>
	</Form>
</Page>
