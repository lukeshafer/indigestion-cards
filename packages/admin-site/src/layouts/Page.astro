---
import Base from './Base.astro'
import type { Session } from "@/session"

export interface Props {
	title: string
	class?: string
	session: Session
}

const alert = Astro.url.searchParams.get('alert')
const alertType = Astro.url.searchParams.get('alertType') ?? 'error'
const alertColor = {
	success: 'bg-green-200',
	error: 'bg-red-200',
}[alertType] ?? 'bg-red-200'
---

<Base title={Astro.props.title}>
	<header class="bg-sky-200 p-4">
		{alert ? <div class={`p-4 ${alertColor} mb-4`}>{alert}</div> : null}
		<nav class="gap-8 text-xl flex flex-wrap">
			{ Astro.props.session?.type === 'user' ? (
				<a href="/">Home</a>
				<a href="/config">Site Config</a>
				<a href="/rarities">Rarities</a>
				<a href="/design">Card Designs</a>
				<a href="/season">Seasons</a>
			) : (
					<a href="/auth/login">Login with Twitch</a>
			)}
		</nav>
	</header>
	<main class={(Astro.props.class ?? '') + ' p-4'}>
		<slot />
	</main>
</Base>
