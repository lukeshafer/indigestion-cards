---
import { api } from '@/constants';

interface Props {
	username: string;
	userId: string;
}

const { username, userId } = Astro.props;

const isCurrentUser =
	Astro.locals.session?.type === 'admin' && Astro.locals.session?.properties.userId === userId;
---

<tr>
	<td>{username}</td>
	<td>
		<button
			class="post-button"
			class:list={{ 'opacity-0': isCurrentUser }}
			disabled={isCurrentUser}
			data-type="delete"
			hx-post={api.ADMIN.DELETE}
			hx-vals={JSON.stringify({ userId, username })}
			hx-swap="outerHTML transition:false"
			hx-target="closest tr">
			Delete
		</button>
	</td>
</tr>
