---
import Form from '@/components/form/Form.astro';
import type { RarityEntity } from '@lil-indigestion-cards/core/card';

interface Props {
	bucket?: string;
	key?: string;
	action: string;
	rarity?: RarityEntity;
}

const { key, bucket, action, rarity } = Astro.props;

const imgUrl = `https://${bucket}.s3.amazonaws.com/${key}`;
---

<Form action={action} method="post">
	{bucket && key ? <input type="hidden" name="imgUrl" value={imgUrl} /> : null}
	{key ? <input type="hidden" name="imageKey" value={key} /> : null}
	{bucket ? <input type="hidden" name="bucket" value={bucket} /> : null}
	<div class="input-group">
		<label for="rarityName">Rarity Name</label>
		<input id="rarityName" name="rarityName" type="text" value={rarity?.rarityName ?? ''} />
	</div>
	<div class="input-group">
		<label for="rarityId">Rarity ID</label>
		<input
			id="rarityId"
			name="rarityId"
			type="text"
			readonly
			data-edit-button
			data-id-from="rarityName"
			pattern="[a-z0-9-]+"
			value={rarity?.rarityId ?? ''}
		/>
	</div>
	<div class="input-group">
		<label for="defaultCount">Default number per card</label>
		<input id="defaultCount" name="defaultCount" type="number" value={rarity?.defaultCount ?? '0'} />
	</div>
	<button type="submit">Save</button>
</Form>
