---
import SortTableRow from '../table/SortTableRow.astro';
import SortTableCell from '../table/SortTableCell.astro';

interface PackType {
	packTypeId: string | undefined;
	packTypeName: string | undefined;
}

interface Props {
	eventName: string;
	id: string;
	defaultValue: PackType | undefined;
	packTypes: PackType[];
}

const { eventName, id, defaultValue: defaultValueObj, packTypes } = Astro.props;

const inputName = `event-type-${id}`;
const defaultValue = JSON.stringify(
	defaultValueObj ?? {
		packTypeId: '',
		packTypeName: '',
	}
);
---

<SortTableRow>
	<SortTableCell>{eventName}</SortTableCell>
	<SortTableCell>
		<select name={inputName} class="my-form-input">
			<option
				value={JSON.stringify({
					packTypeId: '',
					packTypeName: '',
				})}
				selected={defaultValue ===
					JSON.stringify({
						packTypeId: '',
						packTypeName: '',
					})}>
				None
			</option>
			{
				packTypes.map(({ packTypeId, packTypeName }) => (
					<option
						value={JSON.stringify({
							packTypeId,
							packTypeName,
						})}
						selected={
							defaultValue ===
							JSON.stringify({
								packTypeId,
								packTypeName,
							})
						}>
						{packTypeName}
					</option>
				))
			}
		</select>
	</SortTableCell>
</SortTableRow>
