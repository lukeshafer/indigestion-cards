---
import Show from '@/components/Show.astro';
import { NO_CARDS_OPENED_ID, routes } from '@/constants';
import type { CardType } from '@/lib/client/utils';
interface Props {
	card: CardType;
	pathType: 'user' | 'card';
	showUsernames?: boolean;
}
import Card from './Card';

const { card, pathType, showUsernames = false } = Astro.props;
---

<li class="w-fit" data-card={JSON.stringify(card)}>
	<Show when={card.bestRarityFound?.rarityId !== NO_CARDS_OPENED_ID}>
		<Card slot="fallback" {...card} scale="var(--card-scale)" />
		<a
			href={pathType === 'user' && card.username
				? `${routes.USERS}/${card.username}/${card.instanceId ?? ''}`
				: `${routes.INSTANCES}/${card.designId}/${card.instanceId ?? ''}`}>
			<Card {...card} scale="var(--card-scale)" />
		</a>
		<Show when={showUsernames}>
			<p class="mt-2">
				Owner:{' '}
				<a
					href={`${routes.USERS}/${card.username}`}
					class="inline font-bold hover:underline">
					{card.username}
				</a>
			</p>
		</Show>
	</Show>
</li>
