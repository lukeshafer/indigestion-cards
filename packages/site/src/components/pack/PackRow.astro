---
import type { getAllPacks } from '@lil-indigestion-cards/core/card';
import SortTableRow from '@/components/table/SortTableRow.astro';
import SortTableCell from '@/components/table/SortTableCell.astro';
import { api } from '@/constants';

interface Props {
	pack: Awaited<ReturnType<typeof getAllPacks>>[0];
}

const { pack } = Astro.props;
---

<SortTableRow>
	{
		pack.username ? (
			<SortTableCell>
				<span id={pack.packId.replace(/[^\w\d]/g, '') + '-username'}>{pack.username}</span>
			</SortTableCell>
		) : (
			<SortTableCell>None</SortTableCell>
		)
	}
	<SortTableCell>{pack.packTypeName}</SortTableCell>
	<SortTableCell>
		<button
			class="post-button"
			data-type="submit"
			hx-swap="outerHTML"
			hx-vals={JSON.stringify({
				id: pack.packId.replace(/[^\w\d]/g, '') + '-username',
				username: pack.username,
				packId: pack.packId,
			})}
			hx-get={api.PACK.START_EDIT}>
			Edit
		</button>
	</SortTableCell>
</SortTableRow>
