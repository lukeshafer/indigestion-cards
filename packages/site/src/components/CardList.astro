---
import { routes } from '@/constants';
import Card from './cards/Card';

interface Props {
	cards: Parameters<typeof Card>[0][];
	showUsernames?: boolean;
}
const { cards, showUsernames } = Astro.props;

const Element = Astro.locals.session?.type === 'admin' ? 'a' : 'div';
---

<ul class="grid w-full justify-center justify-items-center gap-x-4 gap-y-10 px-3">
	{
		cards.length > 0 ? (
			cards.map((card) => (
				<div>
					<Element
						rel="prefetch"
						href={`${routes.INSTANCES}/${card.designId}/${card.instanceId ?? ''}`}>
						<Card {...card} client:load />
					</Element>
					{showUsernames ? (
						<p class="mt-2">
							Owner:{' '}
							<a
								href={`${routes.USERS}/${card.username}`}
								class="font-bold hover:underline inline">
								{card.username}
							</a>
						</p>
					) : null}
				</div>
			))
		) : (
			<p>No cards found</p>
		)
	}
</ul>

<style>
	ul {
		grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
	}
</style>
