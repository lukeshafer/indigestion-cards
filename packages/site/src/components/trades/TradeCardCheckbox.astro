---
import Card from '../cards/Card.astro';
import type { TradeCardUi } from './NewTrade';

interface Props {
	card: TradeCardUi;
	type: 'offer' | 'request';
}

const { card, type } = Astro.props;
---

<script>
	import { defineElement } from 'solid-enhancement';
	defineElement(
		{ name: 'trade-card-checkbox', attributes: ['checked'] as const },
		({ root, $ }) => {
			$('input').oninput = () => root.toggleAttribute('checked', $('input').checked);
      // should probably emit an event when checked
		}
	);
</script>

<trade-card-checkbox
	checked={card.checked}
	class="checked:outline-brand-main m-1 p-2 checked:bg-gray-200 checked:opacity-90 checked:outline checked:outline-4 checked:dark:bg-gray-800">
	<label class="relative cursor-pointer text-center">
		<input
			class="absolute opacity-0 checked:left-4 checked:top-4 checked:z-50 checked:opacity-100"
			name={`${type}edCards`}
			value={card.instanceId}
			checked={card.checked}
			type="checkbox"
		/>
		<div class="flex w-40 flex-col items-center text-center">
			<Card {...card} scale={0.5} />
			<p class="whitespace-break-spaces font-bold">
				{card.cardName}
			</p>
			<p>{card.rarityName}</p>
			<p>
				{card.cardNumber} / {card.totalOfType}
			</p>
		</div>
	</label>
</trade-card-checkbox>
