---
import type { RarityRankingRecord } from '@lil-indigestion-cards/core/lib/site-config';
import type { TradeCardUi } from './NewTrade';
import { Select, TextInput } from '../form/Form';
import TradeCardCheckbox from './TradeCardCheckbox.astro';

interface Props {
	label: string;
	cards: TradeCardUi[];
	type: 'offer' | 'request';
	rarityRanking?: RarityRankingRecord;
}

const { cards, type, rarityRanking, label } = Astro.props;
---

<script>
import { defineElement } from "solid-enhancement";
defineElement('trade-search-list', ({}) => {
  // add sorting
  // emit event when checkbox is checked (actually -- the checkbox should emit the event)
})
</script>

<trade-search-list>
  <details
    class="bg-brand-100 dark:bg-brand-950 scrollbar-narrow scrollbar-brand m-4 max-h-screen overflow-y-scroll">
    <summary class="bg-brand-100 dark:bg-brand-950 sticky top-0 z-10 h-14 p-4 text-lg">
      {label}
    </summary>
    <div
      class="bg-brand-100 dark:bg-brand-950 border-b-brand-main sticky top-14 z-10 border-b p-4 pt-0">
      <Select
        name="sort"
        label="Sort by"
        setValue={val => setSort(val)}
        options={Array.from(sortTypes)}
      />
      <TextInput label="Search" name="search" setValue={setSearchText} />
    </div>
    <ul class="flex flex-wrap justify-center gap-4 py-4">
      {cards.map(card => <TradeCardCheckbox type={type} card={card} />)}
    </ul>
  </details>
</trade-search-list>
