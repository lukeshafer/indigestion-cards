---
import type { TradeCard } from '@lil-indigestion-cards/core/db/trades';
import { Heading } from '../text';
import TradeOfferWindow from './TradeOfferWindow.astro';

interface Props {
	username: string;
	type: 'sender' | 'receiver';
	cards: TradeCard[];
}

const { username, type: offerType, cards } = Astro.props;
---

<trade-offer-section class="w-full">
	<Heading classList={{ 'text-center': true }}>
		{offerType === 'sender' ? 'Sender' : 'Receiver'}
	</Heading>
	<input type="hidden" name="senderUsername" value={username} />
	<div class="flex h-12 items-end justify-center text-center text-xl font-semibold">
		{username}
	</div>
	<TradeOfferWindow {cards} canChange />
	<!--  
			<CardSearchList
				type="offer"
				label="Your Cards"
				cards={yourCards()}
				setCards={setter => setState('offeredCards', setter)}
				rarityRanking={props.rarityRanking}
			/>
      -->
</trade-offer-section>

<script>
	import { defineElement } from 'solid-enhancement';

	defineElement('trade-offer-section', ({ root, $ }) => {
		root.addEventListener('removecardclick', e => {
			// modify the card list
		});
	});
</script>
