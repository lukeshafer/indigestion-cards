---
import { api } from '@/constants';
const username = Astro.url.searchParams.get('username') || '';
const id = Astro.url.searchParams.get('id');
const packId = Astro.url.searchParams.get('packId');

if (!id) return new Response('No packId provided', { status: 400 });
---

<body>
	<button
		class="post-button save-button"
		data-type="submit"
		hx-select=".edit-button"
		@submit-pack.window="$el.click()"
		hx-swap="outerHTML"
		hx-include="[data-username]"
		hx-vals={JSON.stringify({ packId, id })}
		hx-get={api.PACK.UPDATE_USER}>
		Save
		<form-indicator></form-indicator>
	</button>
	<input
		class="my-form-input text-center w-max mx-auto"
		data-username
		name="username"
		id={id}
		type="text"
		value={username}
		hx-swap-oob="true"
		@keyup.enter="$dispatch('submit-pack')"
	/>
</body>
