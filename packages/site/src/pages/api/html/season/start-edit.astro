---
import { api } from '@/constants';
import Alert from '@/components/Alert.astro';
const seasonId = Astro.url.searchParams.get('seasonId');
const seasonName = Astro.url.searchParams.get('seasonName');
const seasonDescription = Astro.url.searchParams.get('seasonDescription') || '';

const errors = [];
if (!seasonId) errors.push('No seasonId provided.');
if (!seasonName) errors.push('No seasonName provided.');
---

<body>
{
	errors.length > 0 ? (
		<Alert type="error">
			{errors.join(' ')}
		</Alert>
	) : (
		<>
			<button
				class="post-button"
				data-type="submit"
				@submit-season.window="$el.click()"
				hx-include="[data-season-info]"
				hx-swap="outerHTML transition:false"
				hx-vals={JSON.stringify({ seasonId })}
				hx-patch={api.SEASON.UPDATE}>
				Save
			</button>
			<!-- below input uses the same classes as PageHeading -->
			<input
				class="my-form-input font-heading my-2 w-max text-3xl font-bold uppercase"
				id="season-name"
				data-season-info
				name="seasonName"
				type="text"
				value={seasonName}
				hx-swap-oob="true"
				@keyup.enter="$dispatch('submit-season')"
			/>
			<input
				class="my-form-input text-lg"
				id="season-description"
				data-season-info
				name="seasonDescription"
				type="text"
				value={seasonDescription}
				hx-swap-oob="true"
				@keyup.enter="$dispatch('submit-season')"
			/>
		</>
	)}
</body>
