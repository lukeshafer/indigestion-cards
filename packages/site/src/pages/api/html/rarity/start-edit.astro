---
import { api } from '@/constants';
const rarityId = Astro.url.searchParams.get('rarityId');
const rarityName = Astro.url.searchParams.get('rarityName');
const defaultCount = Astro.url.searchParams.get('defaultCount');

if (!rarityId) return new Response('No rarityId provided', { status: 400 });
if (!rarityName) return new Response('No rarityName provided', { status: 400 });
if (!defaultCount) return new Response('No defaultCount provided', { status: 400 });
---

<body>
	<button
		class="post-button save-button"
		data-type="submit"
		hx-select=".edit-button"
		hx-swap="outerHTML"
		hx-include="[data-rarity-info]"
		hx-vals={JSON.stringify({ rarityId: rarityId })}
		hx-get={api.RARITY.UPDATE}>
		Save
	</button>
	<input
		class="my-form-input w-max text-center"
		id={`rarityName-${rarityId}`}
		data-rarity-info
		name="rarityName"
		type="text"
		value={rarityName}
		hx-swap-oob="true"
		_="on keyup[key is 'Enter'] send click to the next <.save-button/>"
	/>
	<input
		class="my-form-input w-max text-center"
		id={`defaultCount-${rarityId}`}
		data-rarity-info
		name="defaultCount"
		type="number"
		value={defaultCount}
		hx-swap-oob="true"
		_="on keyup[key is 'Enter'] send click to the next <.save-button/>"
	/>
</body>
