---
import Form from '@/components/form/Form.astro'
import Page from '@/layouts/Page.astro'
import { useAdmin } from '@/session'
import { api, routes } from '@/constants'
import { getAllPackTypes } from '@lil-indigestion-cards/core/card'

const user = useAdmin(Astro.cookies)
if (!user) return Astro.redirect('/404')

const apiUrl = api.GIVE_PACK_TO_USER
const packTypes = await getAllPackTypes()
---

<Page
	title="Give Pack"
	session={user}
	breadcrumbs={[
		{ label: 'Home', href: '/' },
		{ label: 'Give Pack', href: '/give-pack' },
	]}>
	<h1 class="page-heading">Give Pack</h1>
	<Form action={apiUrl + `?redirect=${routes.ADMIN.GIVE_PACK}`}>
		<div class="input-group">
			<label for="username">Username</label>
			<input type="text" name="username" id="username" required />
		</div>
		<div class="input-group">
			<label for="packType">Pack Type</label>
			<select name="packType" id="packType" required>
				<option value="">--</option>
				{
				packTypes.map((packType) => (
					<option value={JSON.stringify(packType)}>{packType.packTypeName}</option>
				))
				}
			</select>
		</div>
		<button type="submit">Give</button>
	</Form>
</Page>
